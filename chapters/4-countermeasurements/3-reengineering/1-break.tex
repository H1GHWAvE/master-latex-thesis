\subsection{Break Common Reengineering Tools}
\label{subsection:counter-reengineering-break}
applied on dex file

One way to prevent reengineering is to break the tools used to reengineer the software
can be done by different ways
APKfuscator\cite{githubApkfuscator} is an example which includes some variants of how to break these tools
it was presented on Blackhat 2012 at the talk "dex education: practicing safe"\cite{safedexVideo} \cite{safedexSlides}
it is a generic obfuscator and munger which works on dex fiels directly
simple ideas
the propotype has following features
\newline
\newline
\textbf{Too long filenames} \newline
pirates want to have java to better understanding of code, try to fight there
files inside jar have no character limit for names
change name of class to alrge but valid name
\url{https://youtu.be/Rv8DfXNYnOI?t=985} works except for the class\newline
breaks only baksmali
\newline
\newline
\textbf{Inject bad op code} \newline
%
viele schlagen vor:
junkbyte injection
well known technique in x86, confuse disassemblers in a way that they produce disassembly errors and disallow correct interpretations, inserting junkbytes in selected locations within the bytecode where a disassembler expects an instruction, junkbyte must take the disassembling strategy into account in order to reach a maximum of obfuscated code, break the two disassebly stragien from 2.4.0, condition for the location is that the junkbyte must not be executed, because an execution would result in an undesired behavior of the application,  junkbyte must be located in a basic block which will never be executed
\cite{schulzLabCourse}
%

use bad opcode in deadcode \newline
e.g. reference not inited strings \cite{safedexSlides}
\newline
\newline
\textbf{Abuse differences between Dalvik and Java} \newline
include code that is legal in dalvik world but not in java world
e.g. recursive try/catch as described in \cite{safedexSlides}, valid dex code but (might be) impossible in Java code, has to be implemented into the class which should not be recovered by the attacker
\newline
\newline
\textbf{Increase header size} \newline
expected to be 112 bytes, just increase header size which might unexpected to some programms
you have to edit every other offset as well\newline
