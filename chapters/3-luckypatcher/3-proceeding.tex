\section{Analysis of Patched Applications} \label{section:luckypatcher-operation}
In addition to analysing the reverse engineered source code, an analysis of patched applications is done.
This is done by first patching an application and creating a modified apk as described in section~\ref{section:luckypatcher-explain} followed by reengineering and analysing them according to the methodology shown in section~\ref{section:reengineering}.
The reason for not patching directly on the device is the circumstance that when the patch is applied on the application, the patched class.dex will be stored as odex.
Since the odex is specific to the code and device, it does not reveal the general approach of patching
Since the code is modified directly, a static analysis is sufficient.
\newline
The goal of reverse engineering the code and comparing it to the original application is to see the changes on different levels.
This includes the \gls{dex} level, on which Lucky Patcher works, the smali level, which makes the \gls{dex} code human readable friendly, as well as Java level, on which the functionality chance can be identified.
On each level the modified and original code will be compared using diff to retrieve the changes in an easy way as well as ignoring the unchanged code.
\newline
Before working on applications from the store, an application, including the \gls{lvl} as Google's tutorial describes it \cite{developersLicensingAdding}, is created.
The app is called \textit{LicenseTest} in the following.
This is done in order to test whether and how Lucky Patcher works on the most basic version.
For Amazon's Kiwi \gls{drm}, the same application, with deactivated \gls{lvl}, is uploaded to Amazon and injected with their \gls{drm}.
In addition to LicenseTest, other applications were analysed as well, in order to identify additional patterns and to analyse the result.
These apps were chosen since they were already owned and tested to include the license verification library respectively Amazon \gls{drm}.
The applications, which were approved to be included into the thesis by the developers, are Runtastic Pro\cite{runtasticApp}, version 6.3, and Teamspeak 3\cite{teamspeakApp}, version 3.0.20.2, for the \gls{lvl} and A Better Camera \cite{abettercamera}, version 3.35, for the Amazon DRM.
The analysis for Samsung is done by using the example application since the library is implemented the same way into all applications used in.
In contrast to Amazon this can assumed because it is done by the developer and not injected when uploading.
\newline
In addition to the analysis, the modified application is installed on different devices to evaluate the crack.
The difference between the devices is the availability of the corresponding store as well as the presence of root and internet connection.
\newline
Lucky Patcher offers different modes to patch applications.
At the end of patching in a modus the applied patterns can be seen like in figure~\ref{fig:luckyScreen} on the right.
A pattern is a predefined sequence of bytecode setting certain values.
It is searched for and replaced by pre-fabricated code when cracking an application.
These patterns are identified and evaluated after each mode is applied to the test set of applications.
\newline
These are the different modes and what Lucky Patcher descibes them as.
\begin{itemize}
\item The Auto Mode - "The minimal number of patches. Suitable for most applications with simple protection".
\item Auto Mode (Inversed) "There are a few differences from the ”Auto mode”. It may help you, if ”Auto mode” was unsuccessful."
\item Other Patches (Extreme Mode!) - "Additional patches (mnay cause instability). Apply only if the other patterns were unsuccessful. Requires internet. Try to use together with ”Auto mode” or ”Auto mode (Inversed)”."
\item Auto Mode (Amazon Market) - "Removes License Verification for applciations from Amazon Market"
\item Auto Mode (SamsungApps) - "Removes License Verification for Apps from SamsungApps" (Note: SamsungApps is called GalaxyApps, see subsection~\ref{section:license-samsung})
\end{itemize}
