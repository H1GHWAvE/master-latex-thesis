\subsection{Android Runtime} \label{subsection:android-art}
In Android version 4.4 \textit{Kitkat} Google introduced \gls{art} which was optional and only available as a preview through the developer options.
\gls{art} is designed to address the shortcomings of the \gls{dvm}.
\newline
For backwards compability, \gls{art} still works with bytecode in the \gls{dex} files format \cite{androidArt}.
With the release of verison 5.0 \textit{Lollipop} \gls{art} it became the runtime of choice since \gls{dvm} had some major flaws.
Throughout the Android 6.0 \textit{Marshmallow} previews it was constantly evolving and sometimes breaking with older versions at the cost of almost no documentation.
\newline
Maintaining an \gls{vm} is expensive, having an interpreter and \gls{jit} is not as efficient as native code.
Performing \gls{jit} each time the application is executed is wasteful.
In addition, maintaining background threads require significantly more CPU cycles.
Both can be directly translated to slower performance and increased battery usage.
The \gls{dvm} frequently suffers from hangs and jitters caused by the \gls{gc}.
With \gls{art} Android is following iOS into the 64 bit world, the 32 bit support of the \gls{dvm} look like a disadvantage, but it is not.
\newline
Improvements in \gls{art} make the maintenance less expensive, like moving from \gls{jit} to \gls{aot} and reducing overhead cycles.
The \gls{gc} is also non-blocking now and and can run parallel in fore- and background.
\newline
The mean idea of \gls{art} and \gls{aot} is to compile the application to one of two types, either native code or \gls{llvm} code.
Each of the types has its purpose and advantage.
The native code offers an improved execution performance while the \gls{llvm} code offers protability.
In practice the preference is to compile to native since adding \gls{llvm} bitcode adds another layer of complexity to \gls{art}.
\newline
Different from \gls{dvm} is the fact that \gls{art} uses not one but two file formats.
Similar to the zygote of \gls{dvm}, \gls{art} offers an image of pre-initialized classes and and related object at run time, the boot.art file.
It is poorly documented and still chaning a lot.
The boot.art file is mapped in memory before the linked .oat file
It is mapped to the memory upon zygote startup to provide improved application starting time .
In addition to the boot.art file, there are two different .oat files.
The boot.oat contains around fourteen of the most used Android framework \gls{jar}s.
The other .oat files are the former \gls{odex} files.
They are still located in the Dalvik cache, but they are now \gls{elf} files with the odex file embedded.
Instead of \gls{dexopt}, \gls{dex2oat} is used to create these files. \cite{andevconDalvikART} \cite{developersConfigureArt} \cite{androidArt} \cite{intelArt}
\newline
In general, there is still room for improvement since not all code is guaranteed to be compiled.
Since the base code is still dex and thus the \gls{vm} is still 32 bit, \gls{art} is not fully 64 bit.
The generated code is also not always efficient as from a native compiler but is likely to be improved with \gls{llvm} improvements.
