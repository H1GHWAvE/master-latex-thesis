\subsubsection{Implementation of the License Verification Library} \label{section:license-google-implementation}
The provided library of Google can be implemented in only a few steps.
First of all, a Google Publisher Account for Google Play is needed.
It enables the developer to publish applications on Google Play and take advantage of the \gls{lvl}.
As soon as an application is created in the Google Developer Console the public/private key is created.
Each key pair is app specific and can be found under "Services \& API".
It is later on added into the application. \cite{developersLicensingSetup}
\newline
Now that the Google Play prerequisites are set, the \gls{lvl} has to be extracted from the Android \gls{sdk} folder and added to the application.
As soon as the \gls{lvl} is part of the application project the licensing permission can be added to the application's manifest (see code snippet~\ref{codeSnippet:lvlPermission}), else the \gls{lvl} will throw an exception.
\lstinputlisting[
  float=h,
  basicstyle=\footnotesize,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  frame=single,
  numbers=left,
  language=Java,
  linerange={7-9},
  firstnumber=7,
  caption={Include permission to check the license in AndroidManifest.xml \cite{developersLicensingAdding}},
  label={codeSnippet:lvlPermission}
]{data/permission.xml}
The last step is to create the license call which can be seen in code snippet~\ref{codeSnippet:lvlSetup}.
As described in subsection~\ref{section:license-google-functional}, different information has to be aquired and added to the license request.
The first part is the user id, which is created randonly when the user sets the device up for the first time and remains the same for the lifetime of the user's device


- Implementing a Policy, provided by LVL or own
- Implementing an Obfuscator, if Policy caches any license response data. \ref{codeSnippet:lvlSetup} line 59, cannot be reused or manipulated by a root user
- adding code to check license in application main activity\_main
\cite{developersLicensingAdding}
%
\url{https://developer.android.com/google/play/licensing/setting-up.html}

\lstinputlisting[
  float=h,
  basicstyle=\footnotesize,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  frame=single,
  numbers=left,
  language=Java,
  linerange={57-64},
  firstnumber=57,
  caption={Setting up the LVL license check call},
  label={codeSnippet:lvlSetup}
]{data/lvl.java}

\lstinputlisting[
  float=h,
  basicstyle=\footnotesize,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  frame=single,
  numbers=left,
  language=Java,
  linerange={134-150},
  firstnumber=57,
  caption={LVL license check callback},
  label={codeSnippet:lvlCallback}
]{data/lvl.java}
\cite{developersLicensingSetup} \cite{developersLicensingAdding}
