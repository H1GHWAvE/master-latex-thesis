\section{Prevent Reengineering}\label{section:software}
sis is text
\url{https://blog.fortinet.com/post/how-android-malware-hides}\newline
\url{http://www.hotforsecurity.com/blog/mobile-app-development-company-fights-off-android-malware-with-obfuscation-tool-3717.html}\newline


\subsection{Basic Breaks for Common Tools}
pros and cons sagen?\newline
\url{https://github.com/strazzere/APKfuscator}\newline
\url{http://www.strazzere.com/papers/DexEducation-PracticingSafeDex.pdf}\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=811}
\subsubsection{Filesystem}
make classname to long\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=985} works except for the class\newline
breaks only baksmali
\subsubsection{Inject bad OPcode}
use bad opcode in deadcode \newline
code runs but breaks tools\newline
put it into a class you do not use --> care proguard, it will not use it since it is not included\newline
--> fixed...\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=1163}\newline
reference not inited strings\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=1459}
\subsubsection{Throw exceptions which are different in dalvik than in java}
recursive try/catch? --> valid dalvik code\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=1650}
\subsubsection{Increase headersize}
you have to edit every other offset as well\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=1890}\newline
dexception, dex within a dex by shifting\newline
this is a packer/encrypter\newline
slowdown automatic tools\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=1950}\newline
\subsubsection{Endian Tag?}
reverse endian\newline
breaks tools works on device (odex)\newline
lot work for little gain\newline
\url{https://youtu.be/Rv8DfXNYnOI?t=2149}



\subsection{Optimizors and Obfuscators}
Obfuscators/Optimizors definition\newline
remove dead/debug code\newline
potentially encrypt/obfuscate/hide via reflection\newline
\url{https://youtu.be/6vFcEJ2jgOw?t=243}\newline
\subsubsection{Relfection}\label{subsection:basic-}
\url{https://www.youtube.com/watch?v=Rv8DfXNYnOI}\newline
irgendwo erklären
\subsubsection{Proguard}\label{subsection:software-Proguard}
\url{https://youtu.be/6vFcEJ2jgOw?t=419}\newline
optimizes, shrinks, (barely) obfuscates --> free, reduces size, faster\newline
gutes bild \url{https://youtu.be/TNnccRimhsI?t=1360}\newline
removes unnecessary/unused code\newline
merges identical code blocks\newline
performs optimiztations\newline
removes debug information\newline
renames objects\newline
restructures code\newline
removes linenumbers --> stacktrace annoying\newline
\url{https://youtu.be/6vFcEJ2jgOw?t=470}\newline
-->hacker factor 0\newline
does not really help
\subsubsection{Dexguard}\label{subsection:software-dexguard}
master2\newline
OVERVIEW\newline
son of proguard\newline
the \"standard\" protection\newline
optimizer\newline
shrinekr\newline
obfuscator/encrypter, does not stop reverse engineering\newline
\url{https://youtu.be/6vFcEJ2jgOw?t=643}\newline
WHAT DOES IT DO\newline
everything that proguard does\newline
automatic reflection\newline
strign encryption\newline
asset/library encryption\newline
class encryption(packign)\newline
applciation tamper protection\newline
file->automatic reflection->string encryption->file\newline
\url{https://youtu.be/6vFcEJ2jgOw?t=745}\newline
class encryption= packer, unpackers do it most of the time in few seconds, aber aufwand auf handy, nicht so einfach wie pattern in luckypatcher\newline
CONS\newline
may increase dex size, memory size; decrease speed\newline
removes debug information\newline
string, etc encryption\newline
best feature: automatic reflection with string encryption\newline
reversible with moderate effort\newline
hacker protection factor 1\newline
\subsubsection{Allatori}
WHAT DOES IT\newline
name obfuscation\newline
control flow flattening/obfuscation\newline
debug info obfuscation\newline
string encryption\newline
RESULT\newline
decreases dex size, memory, increases speed\newline
remvoes debug code\newline
not much obfuscation\newline
Proguard+string encryption\newline
easily reversed\newline
hacker protection factor 0.5\newline
\url{https://youtu.be/6vFcEJ2jgOw}

\subsubsection{Dexprotector}\label{subsection:software-dexprotector}
master2


\subsection{Protectors}
stub fixes broken code which is normally not translated by tools, breaks static analysis \newline
\url{https://youtu.be/6vFcEJ2jgOw?t=347}\newline
\subsubsection{APKprotect}
\url{https://youtu.be/6vFcEJ2jgOw}\newline
chinese protector\newline
also known as dexcrypt, appears active but site down, clones might be available\newline
anti-debug, anti-decompile, almost like a packer\newline
string encryption\newline
cost ???\newline
tool mangles code original code\newline
-modifies entrypoint to loader stub\newline
-prevents static analysis\newline
during runtime loader stub is executed\newline
-performs anti-emulation\newline
-performs anti-debugging\newline
-fixes broken code in memory\newline
FUNCTION\newline
dalvik optimizes the dex file into momory ignoring bad parts\newline
upon execution dalvik code initiates, calls the native code\newline
native code fixes odex code in memory\newline
execution continues as normal\newline
RESULT\newline
slight file size increase\newline
prevents easily static analysis\newline
hard once, easy afterwards\newline
easily automated to unprotect\newline
still has string encryption (like DexGuard, Allatori) afterwards\newline
not much iteration in the last time, do not knwo if still alive\newline
hacker protection factor 3, no public documentation, but every app is the same\newline


\subsection{Packers}
break static analysis tools, you ahve to do runtime analysis\newline
like UPX, stub application unpacks, decrypts, loads into memory which is normally hidden from static analysis\newline
\url{http://www.fortiguard.com/uploads/general/Area41Public.pdf}\newline
\url{https://books.google.de/books?id=ACjUCgAAQBAJ\&pg=PA372\&lpg=PA372\&dq=ijiami+integrity\&source=bl\&ots=NTf7YaqJiZ\&sig=M5GKDCcQB5dcwXR3hjtIv8pMlAA\&hl=de\&sa=X\&ved=0ahUKEwjH3umt1b3JAhXGLA8KHYhwDGsQ6AEIMDAC\#v=onepage\&q=ijiami%20integrity\&f=false}\newline
\url{https://www.blackhat.com/docs/asia-15/materials/asia-15-Park-We-Can-Still-Crack-You-General-Unpacking-Method-For-Android-Packer-No-Root.pdf}\newline
\url{https://www.virusbtn.com/pdf/conference_slides/2014/Yu-VB2014.pdf}\newline
\url{https://www.youtube.com/watch?v=6vFcEJ2jgOw}\newline

concept erklären und dann die beispiele nennen, nicht mehr aktiv/gecracked aber prinzip ist gut\newline

\subsubsection{hosedex2jar}
\url{https://youtu.be/6vFcEJ2jgOw?t=1776}\newline
PoC packer\newline
not available for real use\newline
appears defunct\newline
near zero ITW samples\newline
mimics dexception attack from dex education 101\newline
FUNCTION\newline
encrypts and injects dexfile into dex header (deception)\newline
very easy to spot\newline
very easy to decrypt, just use dex2jar\newline
static analysis does not work since it sees the encrypted file\newline
on execution loader stub decrypts in memory and dumps to file system\newline
loader stub acts as proxy and passes events to the dex file on system using a dexClassLoader\newline
RESULT\newline
simple PoC\newline
slight file size increase\newline
attempts to prevent static analysis - kind of works\newline
lots of crashing\newline
easily automated to unpack\newline
easy to reverse, good for learning\newline
hacker protection factor 0.5
\subsubsection{Pangxie}
\url{https://youtu.be/6vFcEJ2jgOw?t=1982}\newline
anti-debug\newline
anti-tamper\newline
appears to be defunct product\newline
little usage/samples ITW\newline
FUNCTION\newline
\url{https://youtu.be/6vFcEJ2jgOw?t=2040}\newline
encrypts dex file and bundles as asset in APK\newline
very easy to find, logcat has to much information\newline
dalvik calls JNI layer to verify and decrypt\newline
easy to reverse, both dalvik and native, excellent for beginners to Android and packers\newline
aes used only for digest verification\newline
easily automated, 0x54 always the key\newline
or dynamically grab app\_dex folder\newline
slightly increase file size\newline
prevents static analysis - though easy to identify\newline
uses static 1 byte key for encryption\newline
easily automated to unpack\newline
very easy to reverse, good for learning\newline
good example of an unobfuscated packer stub for cloning\newline
hacker protection faktor 1.5\newline
only working till <4.4\newline
simple packer, increase encryption with key, do not just dump on filesystem\newline

\subsection{BANGCLE}
anti-debugging\newline
anti-tamper\newline
anti-decompilation\newline
anti-runtime injection\newline
online only service, apk checked for malware\newline
detected by some anti virus due to malware\newline
cost 10k\newline
no one has done it before...\newline
stopped working on 4.4\newline
FUNCTION\newline
dalvik execution talks launched JNI\newline
JNI launches secondary process\newline
chatter over PTRACE between the two processes\newline
newest process decrypts dex into memory\newline
original dalvik code proxies everything to the decrypted dex\newline
RESULT\newline
well written, lots of anti-* tricks\newline
seems to be well supported and active on development\newline
does a decent job on online screening - no tool released for download (though things clearly to slip through)\newline
not impossible to reverse and re-bundle packages\newline
current weakness (for easy runtime unpacking) is having a predictable unpacked memory location\newline
hacker protect faktor 5\newline
probably best tool out there but lag when updating since online approval\newline
